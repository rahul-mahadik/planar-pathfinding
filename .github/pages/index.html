<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Planar Pathfinding</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
</head>
<body>
    <div id="loading">Loading... Please wait.</div>
    <div id="error" style="display:none; color:red;"></div>

    <py-config>
        packages = ["pygame", "numpy", "scipy", "shapely"]
        [[fetch]]
        files = ["./main.py"]
    </py-config>
    
    <py-script>
        import sys
        from pyodide.ffi import to_js
        from js import document, console
        
        try:
            print("Starting import...")
            import main
            print("Import successful")
            document.getElementById("loading").style.display = "none"
        except Exception as e:
            error_msg = f"Error: {str(e)}"
            print(error_msg)
            document.getElementById("loading").style.display = "none"
            error_div = document.getElementById("error")
            error_div.textContent = error_msg
            error_div.style.display = "block"
            console.error(error_msg)
    </py-script>

    <py-terminal></py-terminal>
</body>
</html>
